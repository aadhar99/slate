
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Swym JS API Info v2.0</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#public-api" class="toc-h1 toc-link" data-title="Public API">Public API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#retrieving-the-swym-js-and-initializing-it-shopify" class="toc-h2 toc-link" data-title="Retrieving the swym.js and initializing it - Shopify">Retrieving the swym.js and initializing it - Shopify</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sending-data-to-service" class="toc-h1 toc-link" data-title="Sending Data to service">Sending Data to service</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#trackpageview" class="toc-h2 toc-link" data-title="trackPageView">trackPageView</a>
                  </li>
                  <li>
                    <a href="#addtowishlist" class="toc-h2 toc-link" data-title="addToWishlist">addToWishlist</a>
                  </li>
                  <li>
                    <a href="#removefromwishlist" class="toc-h2 toc-link" data-title="removeFromWishList">removeFromWishList</a>
                  </li>
                  <li>
                    <a href="#addtocart" class="toc-h2 toc-link" data-title="addToCart">addToCart</a>
                  </li>
                  <li>
                    <a href="#reportpurchase" class="toc-h2 toc-link" data-title="reportPurchase">reportPurchase</a>
                  </li>
                  <li>
                    <a href="#dropfromcart" class="toc-h2 toc-link" data-title="dropFromCart">dropFromCart</a>
                  </li>
                  <li>
                    <a href="#sendemailwishlist" class="toc-h2 toc-link" data-title="sendEmailWishlist">sendEmailWishlist</a>
                  </li>
                  <li>
                    <a href="#sendwatchlist" class="toc-h2 toc-link" data-title="sendWatchlist">sendWatchlist</a>
                  </li>
                  <li>
                    <a href="#updatewishlistevent" class="toc-h2 toc-link" data-title="updateWishlistEvent">updateWishlistEvent</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#retrieving-data-from-service" class="toc-h1 toc-link" data-title="Retrieving data from service">Retrieving data from service</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#fetch" class="toc-h2 toc-link" data-title="fetch">fetch</a>
                  </li>
                  <li>
                    <a href="#fetchwrteventtype" class="toc-h2 toc-link" data-title="fetchWrtEventType">fetchWrtEventType</a>
                  </li>
                  <li>
                    <a href="#authcheck" class="toc-h2 toc-link" data-title="authCheck">authCheck</a>
                  </li>
                  <li>
                    <a href="#wishlistcount" class="toc-h2 toc-link" data-title="wishlistCount">wishlistCount</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#using-variants-shopify" class="toc-h1 toc-link" data-title="Using variants - Shopify">Using variants - Shopify</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#product-details-page" class="toc-h2 toc-link" data-title="Product details page">Product details page</a>
                  </li>
                  <li>
                    <a href="#collections-page" class="toc-h2 toc-link" data-title="Collections page">Collections page</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authenticating-with-the-service" class="toc-h1 toc-link" data-title="Authenticating with the service">Authenticating with the service</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#remoteauthrequest-request-email-validation" class="toc-h2 toc-link" data-title="remoteAuthRequest -- Request Email Validation">remoteAuthRequest -- Request Email Validation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#delete-event-s" class="toc-h1 toc-link" data-title="Delete event(s)">Delete event(s)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#deleteevent" class="toc-h2 toc-link" data-title="deleteEvent">deleteEvent</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#using-premium-apis-collections-of-wishlist" class="toc-h1 toc-link" data-title="Using premium APIs - Collections of wishlist">Using premium APIs - Collections of wishlist</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#addcollectionstoproduct" class="toc-h2 toc-link" data-title="addCollectionsToProduct">addCollectionsToProduct</a>
                  </li>
                  <li>
                    <a href="#addproductstocollection" class="toc-h2 toc-link" data-title="addProductsToCollection">addProductsToCollection</a>
                  </li>
                  <li>
                    <a href="#getallcollections" class="toc-h2 toc-link" data-title="getAllCollections">getAllCollections</a>
                  </li>
                  <li>
                    <a href="#removecollectionsfromproduct" class="toc-h2 toc-link" data-title="removeCollectionsFromProduct">removeCollectionsFromProduct</a>
                  </li>
                  <li>
                    <a href="#removeproductsfromcollection" class="toc-h2 toc-link" data-title="removeProductsFromCollection">removeProductsFromCollection</a>
                  </li>
                  <li>
                    <a href="#removewishlistcollection" class="toc-h2 toc-link" data-title="removeWishlistCollection">removeWishlistCollection</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#using-premium-apis-social-sharing-of-wishlist" class="toc-h1 toc-link" data-title="Using Premium APIs - Social sharing of Wishlist">Using Premium APIs - Social sharing of Wishlist</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sharewishlistsocial" class="toc-h2 toc-link" data-title="shareWishlistSocial">shareWishlistSocial</a>
                  </li>
                  <li>
                    <a href="#generatesharedwishlisturl" class="toc-h2 toc-link" data-title="generateSharedWishlistURL">generateSharedWishlistURL</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#enum-reference" class="toc-h1 toc-link" data-title="Enum reference">Enum reference</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#eventtype-et" class="toc-h2 toc-link" data-title="EventType (et)">EventType (et)</a>
                  </li>
                  <li>
                    <a href="#devicecategory-dcat" class="toc-h2 toc-link" data-title="DeviceCategory (dcat)">DeviceCategory (dcat)</a>
                  </li>
                  <li>
                    <a href="#json-key-reference-for-sending-pageview-wishlist-cart-events" class="toc-h2 toc-link" data-title="JSON key reference for sending pageview/wishlist/cart events">JSON key reference for sending pageview/wishlist/cart events</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#provider-based-validation-shopify" class="toc-h1 toc-link" data-title="Provider based validation - Shopify">Provider based validation - Shopify</a>
          </li>
          <li>
            <a href="#provider-based-validation-magento" class="toc-h1 toc-link" data-title="Provider based validation - Magento">Provider based validation - Magento</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-parameters" class="toc-h2 toc-link" data-title="Request parameters">Request parameters</a>
                  </li>
                  <li>
                    <a href="#request-headers" class="toc-h2 toc-link" data-title="Request headers">Request headers</a>
                  </li>
                  <li>
                    <a href="#response" class="toc-h2 toc-link" data-title="Response">Response</a>
                  </li>
                  <li>
                    <a href="#examples" class="toc-h2 toc-link" data-title="Examples">Examples</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://swym.it/' target='_blank'>Visit our website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>This document lists and explains various front-end javascript APIs exposed by Swym. One can refer this documentation to get the formal knowledge on how to manipulate front-end behaviour of Swym’s applications according to the respective needs. In case of any incorrect or incomplete information, please reach out to the developers’ team at Swym.</p>

<p>In this documentation, we have covered following topics for an individual API:</p>

<ul>
<li><p>What does a particular API do?</p></li>
<li><p>When it should be called?</p></li>
<li><p>What are the arguments?</p></li>
<li><p>Example request and response</p></li>
</ul>
<h1 id='authentication'>Authentication</h1>
<p>There is no other authentication required except from the one which was provided while installation of Swym application. To use these APIs, only initialization of <code>_swat</code> object in window is required. Make sure it is available before calling the custom workflows. You can check the same by using simple <code>if</code> condition on <code>window._swat</code> in your code.</p>
<h1 id='public-api'>Public API</h1>
<p>This section outlines how to use the Swym Public API.</p>
<h2 id='retrieving-the-swym-js-and-initializing-it-shopify'>Retrieving the swym.js and initializing it - Shopify</h2>
<p>When you are using the Swym Shopify app, the reference to swym.js is already initialized for you. Wrap all calls referencing <code>window._swat</code> as below in a javascript file or within <code>script</code> tags.</p>
<pre class="highlight javascript tab-javascript"><code><span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// call your function</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">SwymCallbacks</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">SwymCallbacks</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">SwymCallbacks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//call your function</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre><h1 id='sending-data-to-service'>Sending Data to service</h1><h2 id='trackpageview'>trackPageView</h2>
<p>Sends a page view event , by default. Specific information regarding the page is automatically collected and sent (if unspecified and detected from the page).  You can call this method once the <code>window._swat</code> object is initialized. </p>

<p>This API can be called in below scenarios,</p>

<ul>
<li><p>A product page is loaded</p></li>
<li><p>A product is loaded in a quick view popup</p></li>
<li><p>A product variant is changed, if you want more granularity in tracking, at a variant level in addition to the above two scenarios</p></li>
</ul>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">trackPageview</span><span class="p">({</span>
  <span class="s2">"epi"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="s2">"du"</span><span class="p">:</span> <span class="s2">"https://www.understandfrance.org/AsterixObelix"</span><span class="p">,</span>
  <span class="s2">"empi"</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
  <span class="s2">"iu"</span> <span class="p">:</span> <span class="s2">"//www.understandfrance.org/Images/AsterixObelix.jpg"</span><span class="p">,</span> 
  <span class="s2">"pr"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
  <span class="s2">"stk"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="s2">"variants"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"Blue / XL"</span><span class="p">:</span> <span class="mi">123</span><span class="p">}]</span>
<span class="p">});</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>empi</td>
<td>int/string</td>
<td>External product master id (if there is a group product id with different variant ids)</td>
</tr>
<tr>
<td>iu</td>
<td>string</td>
<td>Image-uri - Without protocol so protocol can be decided while rendering to http or https</td>
</tr>
<tr>
<td>pr</td>
<td>float</td>
<td>Price</td>
</tr>
</tbody></table>
<h2 id='addtowishlist'>addToWishlist</h2>
<p>Adds a new wishlist event. Please refer to the example. You can call this method once the window._swat object is initialized. This API operates at the epi, i.e. product variant level as set by the store.</p>

<p>This API can be called in the below scenarios,</p>

<ul>
<li><p>&#39;onclick&#39; button on a product page</p></li>
<li><p>&#39;onclick&#39; button on a product quick view</p></li>
<li><p>&#39;onclick&#39; buttons on a collections page with multiple products</p></li>
<li><p>&#39;onclick&#39; buttons on a widget of multiple products, Eg: related products, top wishlist products, etc.</p></li>
</ul>

<p>Tip - Before showing a button for &#39;Add to Wishlist&#39;, it is best to first check if the product or variant is already in the wishlist, by using the &quot;fetch&quot; API. </p>

<p>Please refer our blog/guide for directly connecting button to wishlist actions here - <a href="http://swym.it/wishlist-plus-customizations-cheatsheet/">Wishlist Plus Customization Cheatsheet</a></p>

<blockquote>
<p>In this example, the request adds the product variant to the wishlist. Please note that the parameters below are mandatory ones (epi, empi, du and iu).</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">addToWishList</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"epi"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s2">"du"</span><span class="p">:</span> <span class="s2">"https://yourstore.com/products/your-awesome-product"</span><span class="p">,</span>
    <span class="s2">"empi"</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="s2">"iu"</span> <span class="p">:</span> <span class="s2">"//www.understandfrance.org/Images/AsterixObelix.jpg"</span><span class="p">,</span>
    <span class="s2">"pr"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"stk"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"variants"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"Blue / XL"</span><span class="p">:</span> <span class="mi">123</span><span class="p">}]</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Added to wishlist'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>empi</td>
<td>int/string</td>
<td>External product master id (if there is a group product id with different variant ids)</td>
</tr>
<tr>
<td>iu</td>
<td>string</td>
<td>Image-uri - Without protocol so protocol can be decided while rendering to http or https</td>
</tr>
<tr>
<td>pr</td>
<td>float</td>
<td>Price</td>
</tr>
<tr>
<td>For response</td>
<td>function</td>
<td>A callback function, which takes a single argument (JSON response from the swym service)</td>
</tr>
</tbody></table>
<h2 id='removefromwishlist'>removeFromWishList</h2>
<p>Removes a previously added wishlist event. Please refer to the example. You can call this method once the <code>window._swat</code> object is initialized. This API can be used for the same scenarios as <code>addToWishList</code>.</p>

<blockquote>
<p>In this example, removeFromWishList removes  a previously added entry from the wish list.</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">removeFromWishList</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"epi"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s2">"du"</span><span class="p">:</span> <span class="s2">"https://yourstore.com/products/your-awesome-product"</span><span class="p">,</span>
    <span class="s2">"empi"</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="s2">"iu"</span> <span class="p">:</span> <span class="s2">"//www.understandfrance.org/Images/AsterixObelix.jpg"</span><span class="p">,</span>
    <span class="s2">"pr"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"stk"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"variants"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"Blue / XL"</span><span class="p">:</span> <span class="mi">123</span><span class="p">}]</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Removed to wishlist'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>empi</td>
<td>int/string</td>
<td>External product master id (if there is a group product id with different variant ids)</td>
</tr>
<tr>
<td>iu</td>
<td>string</td>
<td>Image-uri - Without protocol so protocol can be decided while rendering to http or https</td>
</tr>
<tr>
<td>pr</td>
<td>float</td>
<td>Price</td>
</tr>
<tr>
<td>For response</td>
<td>function</td>
<td>A callback function, which takes a single argument (JSON response from the swym service)</td>
</tr>
</tbody></table>
<h2 id='addtocart'>addToCart</h2>
<p>Adds a new cart event. Please refer to the example. You can call this method once the <code>window._swat</code> object is initialized.</p>

<aside class="notice">Note - This API does not add product to the cart.</aside>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">addToCart</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"epi"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s2">"du"</span><span class="p">:</span> <span class="s2">"https://yourstore.com/products/your-awesome-product"</span><span class="p">,</span>
    <span class="s2">"empi"</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="s2">"iu"</span> <span class="p">:</span> <span class="s2">"//www.understandfrance.org/Images/AsterixObelix.jpg"</span><span class="p">,</span>
    <span class="s2">"pr"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"qty"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">"stk"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"variants"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"Blue / XL"</span><span class="p">:</span> <span class="mi">123</span><span class="p">}]</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Added to cart'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>empi</td>
<td>int/string</td>
<td>External product master id (if there is a group product id with different variant ids)</td>
</tr>
<tr>
<td>iu</td>
<td>string</td>
<td>Image-uri - Without protocol so protocol can be decided while rendering to http or https</td>
</tr>
<tr>
<td>pr</td>
<td>float</td>
<td>Price</td>
</tr>
<tr>
<td>For response</td>
<td>function</td>
<td>A callback function, which takes a single argument (JSON response from the swym service)</td>
</tr>
</tbody></table>
<h2 id='reportpurchase'>reportPurchase</h2>
<p>Adds a new purchase event. Please refer to the example. You can call this method once the <code>window._swat</code> object is initialized.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">reportPurchase</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"epi"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s2">"du"</span><span class="p">:</span> <span class="s2">"https://yourstore.com/products/your-awesome-product"</span><span class="p">,</span>
    <span class="s2">"empi"</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="s2">"iu"</span> <span class="p">:</span> <span class="s2">"//www.understandfrance.org/Images/AsterixObelix.jpg"</span><span class="p">,</span>
    <span class="s2">"pr"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"qty"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">"stk"</span><span class="p">:</span> <span class="mi">96</span><span class="p">,</span>
    <span class="s2">"variants"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"Blue / XL"</span><span class="p">:</span> <span class="mi">123</span><span class="p">}]</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Reported purchase'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>empi</td>
<td>int/string</td>
<td>External product master id (if there is a group product id with different variant ids)</td>
</tr>
<tr>
<td>iu</td>
<td>string</td>
<td>Image-uri - Without protocol so protocol can be decided while rendering to http or https</td>
</tr>
<tr>
<td>pr</td>
<td>float</td>
<td>Price</td>
</tr>
<tr>
<td>For response</td>
<td>function</td>
<td>A callback function, which takes a single argument (JSON response from the swym service)</td>
</tr>
</tbody></table>
<h2 id='dropfromcart'>dropFromCart</h2>
<p>Adds a new removed from cart event. Please refer to the example. You can call this method once the <code>window._swat</code> object is initialized.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">dropFromCart</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="s2">"epi"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s2">"du"</span><span class="p">:</span> <span class="s2">"https://yourstore.com/products/your-awesome-product"</span><span class="p">,</span>
    <span class="s2">"empi"</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="s2">"iu"</span> <span class="p">:</span> <span class="s2">"//www.understandfrance.org/Images/AsterixObelix.jpg"</span><span class="p">,</span>
    <span class="s2">"pr"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"qty"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">"stk"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"variants"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"Blue / XL"</span><span class="p">:</span> <span class="mi">123</span><span class="p">}]</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Dropped from cart'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>empi</td>
<td>int/string</td>
<td>External product master id (if there is a group product id with different variant ids)</td>
</tr>
<tr>
<td>iu</td>
<td>string</td>
<td>Image-uri - Without protocol so protocol can be decided while rendering to http or https</td>
</tr>
<tr>
<td>pr</td>
<td>float</td>
<td>Price</td>
</tr>
<tr>
<td>For response</td>
<td>function</td>
<td>A callback function, which takes a single argument (JSON response from the swym service)</td>
</tr>
</tbody></table>
<h2 id='sendemailwishlist'>sendEmailWishlist</h2>
<p>Sends an email with the wishlist contents of the current user to a given email id. </p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">sendEmailWishList</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Email sent!'</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="s2">"abc@xyz.com"</span><span class="p">,</span>
  <span class="s2">"Admin"</span><span class="p">,</span>
  <span class="s2">"Hey, check out these products!"</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>A callback function which takes a single argument (JSON response from the swym service)</td>
</tr>
<tr>
<td>emailId</td>
<td>string</td>
<td>An email Id to send the favorites to</td>
</tr>
<tr>
<td>fromEmailId</td>
<td>string</td>
<td>The sender&#39;s email id / name</td>
</tr>
<tr>
<td>note</td>
<td>string</td>
<td>Some personal note that needs to be sent along with the email contents</td>
</tr>
<tr>
<td>hashtag</td>
<td>string</td>
<td>If collections of wishlist is used, a particular collection name that needs to be shared (optional)</td>
</tr>
</tbody></table>
<h2 id='sendwatchlist'>sendWatchlist</h2>
<p>Sends an back-in-stock alert request to the Swym platform.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">sendWatchlist</span><span class="p">(</span>
  <span class="s2">"demo@demo.com"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">epi</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="na">empi</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
    <span class="na">iu</span><span class="p">:</span> <span class="s2">"https://a.com/b.jpeg"</span><span class="p">,</span>
    <span class="na">pr</span><span class="p">:</span> <span class="mi">23</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mediumValue</td>
<td>string</td>
<td>Value of the medium (currently supported ‘email’, hence email Id)</td>
</tr>
<tr>
<td>medium</td>
<td>string</td>
<td>What id is collected</td>
</tr>
<tr>
<td>product</td>
<td>object</td>
<td>Object with keys - {&quot;epi&quot; (variant id), &quot;empi&quot; (product master id), &quot;iu&quot; (image url), &quot;pr&quot; (price)}</td>
</tr>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>Function that gets called after a successful HTTP API call</td>
</tr>
<tr>
<td>errorFn</td>
<td>function</td>
<td>Function that gets called when an error occurs</td>
</tr>
<tr>
<td>addToMailingList</td>
<td>boolean</td>
<td>Boolean to tell if user opted in or out from the mailing list (Note:- requires mailing list feature to be set up from Swym&#39;s end)</td>
</tr>
</tbody></table>
<h2 id='updatewishlistevent'>updateWishlistEvent</h2>
<p>Allows updating &quot;cprops&quot; parameter for an array of events. More info on &quot;cprops&quot; is here.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">updateWishlistEvent</span><span class="p">(</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">epi</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">cprops</span><span class="p">:</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>eventsToUpdate</td>
<td>array</td>
<td>An array of objects containing the keys &quot;epi&quot; and &quot;cprops&quot; corresponding to the events that need to be updated</td>
</tr>
<tr>
<td>successCallback</td>
<td>function</td>
<td>Function that gets called if the events are updated successfully</td>
</tr>
<tr>
<td>errorCallback</td>
<td>function</td>
<td>Function that gets called if the update ran into an error</td>
</tr>
</tbody></table>
<h1 id='retrieving-data-from-service'>Retrieving data from service</h1><h2 id='fetch'>fetch</h2>
<p>Fetch the history of events from the swym service.  The set of events fetched from the swym service is sorted by date (reverse chronological).  You can call this method once the <code>window._swat</code> object is initialized.</p>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span> 
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'demo'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span> 
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Exmaple response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"di"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid.ts"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variants"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">Blue</span><span class="se">\"</span><span class="s2">:123}]"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product - Blue"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"et"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"raw-du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"act"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"empi"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1111</span><span class="p">,</span><span class="w">
    </span><span class="s2">"du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yourstorepid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"epi"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"//yourstore.com/images/your-awesome-product-123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Personal computer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pr"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ct"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Accessories"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"product-variant"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"di"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid.ts"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variants"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">Red</span><span class="se">\"</span><span class="s2">:134}]"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product - Red"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"et"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"raw-du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=134"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"act"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"empi"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
    </span><span class="s2">"du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=134"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yourstorepid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"epi"</span><span class="p">:</span><span class="w"> </span><span class="mi">134</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"//yourstore.com/images/your-awesome-product-134"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Personal computer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pr"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ct"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Accessories"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"product-variant"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>A callback function with a single argument, which is a  JSON response on success.</td>
</tr>
</tbody></table>
<h2 id='fetchwrteventtype'>fetchWrtEventType</h2>
<p>Fetch the items based on a filter from the swym service.  The set of events fetched from the swym service is sorted by date (reverse chronological).  You can call this method once the window._swat object is initialized. This is used to fetch wishlist items, please see the example.</p>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">fetchWrtEventType</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span> 
    <span class="c1">// Get wishlist items</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'demo'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span> 
  <span class="p">},</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">EventTypes</span><span class="p">.</span><span class="nx">addToWishList</span>
<span class="p">);</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"di"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid.ts"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variants"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">Blue</span><span class="se">\"</span><span class="s2">:123}]"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product - Blue"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"et"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"raw-du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"act"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"empi"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1111</span><span class="p">,</span><span class="w">
    </span><span class="s2">"du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yourstorepid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"epi"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"//yourstore.com/images/your-awesome-product-123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Personal computer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pr"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ct"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Accessories"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"product-variant"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"di"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deviceid.ts"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variants"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">Red</span><span class="se">\"</span><span class="s2">:134}]"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Awesome Product - Red"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"et"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"raw-du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=134"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"act"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"empi"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
    </span><span class="s2">"du"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://yourstore/products/your-awesome-product?v=134"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yourstorepid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"epi"</span><span class="p">:</span><span class="w"> </span><span class="mi">134</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"//yourstore.com/images/your-awesome-product-134"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Personal computer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pr"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ct"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Accessories"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dcat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"product-variant"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>A callback function with a single argument, which is a  JSON response on success.</td>
</tr>
<tr>
<td>event type</td>
<td>int</td>
<td>enum Reference</td>
</tr>
</tbody></table>
<h2 id='authcheck'>authCheck</h2>
<p>Query the swym service to see if the current browser is authenticated.</p>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">authCheck</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'demo'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<blockquote>
<p>Example response if auth</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"r@foo.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authn"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example response if not auth</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"authn"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>A callback function with a single argument, which is a  JSON response called by authCheck.</td>
</tr>
</tbody></table>
<h2 id='wishlistcount'>wishlistCount</h2>
<p>Get the current count of wishlist.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">wishlistCount</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Wishlist items - '</span><span class="p">,</span> <span class="nx">r</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>A callback function which receives a single argument, which is the number of wishlist items for the user</td>
</tr>
</tbody></table>
<h1 id='using-variants-shopify'>Using variants - Shopify</h1><h2 id='product-details-page'>Product details page</h2>
<p>In Shopify, each product has multiple variants. In many stores, it is very important to capture events at a variant level, such as the variant id, variant price, variant stock, variant options, variant image, etc. The end user interacts with the product from the product details page, a collections page, a quick view popup or a widget of products. Swym provides support for managing events at product and variant levels for each of those scenarios. Find the detailed explanation below:</p>

<p>For a product details page - Let’s take the “onload” and “afterload”  scenarios and break it down to use cases - </p>

<p>“onload” - When a product page is opened, following are the usual patterns,</p>

<ul>
<li><p>First variant is picked </p></li>
<li><p>First variant that is in stock and available to purchase is picked</p></li>
<li><p>The variant specified in the query parameter <code>variant=&lt;<variantid>&gt;</code> to the url is picked</p></li>
</ul>

<p>For most themes, scenarios 1 and 3 are common, but there are no defined rules. Also, it can be the theme developer’s choice as how to control product details page. Swym has inbuilt support for scenarios 1 and 3. For ensuring scenario 2, the below snippet needs to be called to let Swym know of the current variant, once <code>window._swat</code> is initialized.</p>

<aside>window.triggerSwymVariantEvent(variantid); // variantid is the currently selected variant id</aside>

<p>“afterload” - After page is opened, user can switch variants. Most themes use Shopify’s <code>Shopify.OptionSelector</code> library to enable variant selection elegantly. Swym has inbuilt support for this plugin. However there are no defined rules for this and hence in cases where the implementation is different, the below snippet needs to be called to let Swym know of the current variant whenever it is changed.</p>

<aside>window.triggerSwymVariantEvent(variantid);</aside>
<h2 id='collections-page'>Collections page</h2>
<p>Most themes do not allow changing variants in the collection view. In other cases if it is allowed, whenever variant is changed, please follow the below steps to use custom wishlist buttons.</p>

<ol>
<li><p>check if variant is already in the Wishlist by checking with the “fetch” api</p></li>
<li><p>the event data passed to “addToWishList” has to be modified</p></li>
</ol>

<p>For product’s ‘quick view’ and other third party widgets - Whenever variant is changed, please follow the below steps,</p>

<ol>
<li><p>If tracking is required at granular level, call “trackPageView” for product data</p></li>
<li><p>check if variant is already in the Wishlist by checking with the “fetch” api</p></li>
<li><p>the event data passed to “addToWishList” has to be modified</p></li>
</ol>
<h1 id='authenticating-with-the-service'>Authenticating with the service</h1><h2 id='remoteauthrequest-request-email-validation'>remoteAuthRequest -- Request Email Validation</h2>
<p>Request  the swym service to send a one time email validation link.</p>

<aside class="notice">
Currently, the validation link is not sent via email. Instead the validation link is logged to the local (javascript/browser console).  Once, you click on this link, that browser is assigned to the requested email.  Your next call will automatically fetch the updated credentials.
</aside>

<aside class="notice">You can refresh these credentials either explicitly by clicking on “Refresh Auth Credentials”. Although this is typically not needed.</aside>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight html tab-html"><code><span class="nt">&lt;form</span> <span class="na">name=</span><span class="s">"ra"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"email"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span>
    <span class="na">type=</span><span class="s">"button"</span>
    <span class="na">value=</span><span class="s">"Request Email Validation"</span>
    <span class="na">onClick=</span><span class="s">"window._swat.remoteAuthRequest(function(r) {}, ra.email.value)"</span>
  <span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>A callback function with a single argument, which is a  JSON response called by remoteAuthRequest</td>
</tr>
<tr>
<td>email address</td>
<td>string</td>
<td>A valid email address</td>
</tr>
</tbody></table>
<h1 id='delete-event-s'>Delete event(s)</h1><h2 id='deleteevent'>deleteEvent</h2>
<p>Basically, this is a stubbed API to delete one or all events associated with a device(s).</p>

<p>deleteEvent - deletes a single event, You need to specify the event _id, an alphanumeric value. Refer the <a href="#fetch">fetch</a> method for this highlighted event.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">deleteEvent</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'deleted'</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">_id</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callbackFn</td>
<td>function</td>
<td>A callback function with a single argument, which is a  JSON response called by remoteAuthRequest</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>An alphanumeric event id value</td>
</tr>
</tbody></table>
<h1 id='using-premium-apis-collections-of-wishlist'>Using premium APIs - Collections of wishlist</h1>
<p>The Swym platform supports having multiple wishlists for a user, eg: my lounge, my bedroom, etc. or in case of fashion eg: my outdoor collection, my summer list, etc. These APIs are available on the premium plans, please contact us to enable these APIs for your installation.</p>
<h2 id='addcollectionstoproduct'>addCollectionsToProduct</h2>
<p>Add an array of collections to a product. When adding a product to wishlist, this API has to be called before calling <a href="#addtowishlist">addToWishlist</a> API.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">addCollectionsToProduct</span><span class="p">(</span>
  <span class="nx">epi</span><span class="p">,</span> <span class="c1">// epi is the currently selected variant id</span>
  <span class="p">[</span><span class="s2">"My Lounge"</span><span class="p">],</span>
  <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Added to collection"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span> 
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>Collections to add</td>
<td>array</td>
<td>Array of hashtags eg: [&quot;My Lounge&quot;]</td>
</tr>
<tr>
<td>Success callback</td>
<td>function</td>
<td>Optional. Success callback function which will be called upon successful response.</td>
</tr>
<tr>
<td>Error callback</td>
<td>function</td>
<td>Optional. Error callback function which will be called if unsuccessful response.</td>
</tr>
</tbody></table>

<aside class="success">
This should be followed by a call to addToWishlist. To retrieve the collection for a wishlisted product, every object has a property “hashtags” containing the array of collections set for the product.
</aside>
<h2 id='addproductstocollection'>addProductsToCollection</h2>
<p>Add a list of products to a collection.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">addProductsToCollection</span><span class="p">(</span>
  <span class="s2">"My Lounge"</span><span class="p">,</span>
  <span class="p">[</span> <span class="nx">epi</span> <span class="p">],</span> <span class="c1">// epi is the currently selected variant id</span>
  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Added to collection"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>collection</td>
<td>string</td>
<td>e.g. “My Lounge”</td>
</tr>
<tr>
<td>productsToAdd</td>
<td>array</td>
<td>List of variant ids to add to the collection</td>
</tr>
<tr>
<td>Success callback</td>
<td>function</td>
<td>Optional. Success callback function which will be called upon successful response.</td>
</tr>
<tr>
<td>Error callback</td>
<td>function</td>
<td>Optional. Error callback function which will be called if unsuccessful response.</td>
</tr>
</tbody></table>

<aside class="success">
This should be followed by a call to addToWishlist. To retrieve the collection for a wishlisted product, every object has a property “hashtags” containing the array of collections set for the product.
</aside>
<h2 id='getallcollections'>getAllCollections</h2>
<p>Gets all collections for the current user.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">getAllCollections</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">collections</span><span class="p">){</span>
  <span class="c1">// code to use the returned collections</span>
<span class="p">})</span>
<span class="kd">var</span> <span class="nx">collections</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">getAllCollections</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">collections</span><span class="p">){},</span>
  <span class="kc">true</span>
<span class="p">);</span> <span class="c1">// with the bImmediate argument</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callback</td>
<td>function</td>
<td>A callback function that will receive all the collections</td>
</tr>
<tr>
<td>bImmediate</td>
<td>boolean</td>
<td>Boolean for whether to get all collections from in-memory cache or make an API call. If true, the API will return results. If false, the results will be returned to the callback function.</td>
</tr>
</tbody></table>
<h2 id='removecollectionsfromproduct'>removeCollectionsFromProduct</h2>
<p>Remove a set of collections from a wishlisted product. Let’s say a product is added in some custom collections (product has hashtags) and we want to remove a product from some particular collections. Call this API and it will remove particular hashtags from a swym product’s data. Now, product will not be shown in those collections anymore.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">removeCollectionsFromProduct</span><span class="p">(</span>
  <span class="mi">141445464108</span><span class="p">,</span>
  <span class="p">[</span> <span class="s2">"summer collection"</span><span class="p">,</span> <span class="s2">"ann's birthday"</span> <span class="p">],</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>epi</td>
<td>int/string</td>
<td>External product unique id (variant level if applicable)</td>
</tr>
<tr>
<td>collectionsToRemove</td>
<td>array</td>
<td>An array of collections to remove</td>
</tr>
<tr>
<td>Success callback</td>
<td>function</td>
<td>Optional. Success callback function which will be called upon successful response.</td>
</tr>
<tr>
<td>Error callback</td>
<td>function</td>
<td>Optional. Error callback function which will be called if unsuccessful response.</td>
</tr>
</tbody></table>
<h2 id='removeproductsfromcollection'>removeProductsFromCollection</h2>
<p>Remove an array of products from a collection.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">removeProductsFromCollection</span><span class="p">(</span>
  <span class="s2">"summer collection"</span><span class="p">,</span>
  <span class="p">[</span> <span class="mi">141445464108</span> <span class="p">],</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>collection</td>
<td>string</td>
<td>Collection name</td>
</tr>
<tr>
<td>productsToRemove</td>
<td>array</td>
<td>An array of products to remove</td>
</tr>
<tr>
<td>Success callback</td>
<td>function</td>
<td>Optional. Success callback function which will be called upon successful response.</td>
</tr>
<tr>
<td>Error callback</td>
<td>function</td>
<td>Optional. Error callback function which will be called if unsuccessful response.</td>
</tr>
</tbody></table>
<h2 id='removewishlistcollection'>removeWishlistCollection</h2>
<p>Removes a wishlist collection.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">removeWishlistCollection</span><span class="p">(</span>
  <span class="s2">"Patio furniture"</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">);</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>collectionsToRemove</td>
<td>array</td>
<td>An array of collections to remove</td>
</tr>
<tr>
<td>Success callback</td>
<td>function</td>
<td>Optional. Success callback function which will be called upon successful response.</td>
</tr>
<tr>
<td>Error callback</td>
<td>function</td>
<td>Optional. Error callback function which will be called if unsuccessful response.</td>
</tr>
</tbody></table>
<h1 id='using-premium-apis-social-sharing-of-wishlist'>Using Premium APIs - Social sharing of Wishlist</h1><h2 id='sharewishlistsocial'>shareWishlistSocial</h2>
<p>This API creates the unique URL for a particular sharing platform and opens a new dialog in that platform to perform the sharing step. For eg., for facebook, the share page will be opened in a new window.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">shareWishlistSocial</span><span class="p">(</span>
  <span class="kc">null</span><span class="p">,</span>
  <span class="s2">"https://www.facebook.com/sharer.php?u={{shareurl}}&amp;t={{note}}"</span><span class="p">,</span>
  <span class="s2">"facebook"</span><span class="p">,</span>
  <span class="s2">"Hello World"</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">}</span>
<span class="p">);</span> <span class="c1">// will open facebook share dialog</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hashtag</td>
<td>string</td>
<td>If collections of Wishlist is not enabled, hashtag has to be set as null.</td>
</tr>
<tr>
<td>platformShareUrlTemplate</td>
<td>string</td>
<td>The social platform-specific share URL with Mustache tags. More info here and here. Out of the box, platforms supported are &quot;facebook&quot;, &quot;twitter&quot;, &quot;googleplus&quot;. To get share urls for these, use the variable - _swat.retailerSettings.Wishlist.SharingModes. This has the default icon url, share url and key for each of these platforms. Again, new platforms can be added here and/or default icons can be changed for you if you need it.</td>
</tr>
<tr>
<td>platform</td>
<td>string</td>
<td>The key to one of the sharing platforms. By default, one of &quot;facebook&quot;, &quot;twitter&quot;, &quot;googleplus&quot;</td>
</tr>
<tr>
<td>note</td>
<td>string</td>
<td>Some platforms allow to send a custom note along with shared url. This field is to capture that message. Amongst the defaults, at the moment, notes only work with twitter.</td>
</tr>
<tr>
<td>errCallBack</td>
<td>function</td>
<td>Function that gets called if there is an error. Called with error message as argument.</td>
</tr>
</tbody></table>
<h2 id='generatesharedwishlisturl'>generateSharedWishlistURL</h2>
<p>A lower level API that returns the unique wishlist URL that can be shared anywhere. This URL will return the user who clicks on it back to the site into the default share wishlist page. This page can be overridden from the retailer settings if need be.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">_swat</span><span class="p">.</span><span class="nx">generateSharedWishlistURL</span><span class="p">(</span>
  <span class="kc">null</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="p">},</span>     <span class="c1">// returns the generated url</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="p">}</span>
<span class="p">;)</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hashtag</td>
<td>string</td>
<td>If collections of Wishlist is not enabled, hashtag has to be set as null.</td>
</tr>
<tr>
<td>successFn</td>
<td>function</td>
<td>Function that gets called if the URL is generated successfully. The generated url is sent as argument to this function</td>
</tr>
<tr>
<td>errorFn</td>
<td>function</td>
<td>Function that gets called if the URL generation fails. Error message is passed as argument.</td>
</tr>
</tbody></table>
<h1 id='enum-reference'>Enum reference</h1><h2 id='eventtype-et'>EventType (et)</h2>
<p>&quot;et&quot;</p>

<p>0 - Unknown, </p>

<p>1 - product, </p>

<p>2 - category, </p>

<p>3 - cart</p>

<p>4 - wishlist</p>

<p>5 - coupon</p>

<p>6 - product purchase</p>

<p>7 - removed from cart</p>
<h2 id='devicecategory-dcat'>DeviceCategory (dcat)</h2>
<p>“DeviceCategory” is an enum that will typically return one of these three types:</p>

<ul>
<li><p>&quot;Personal computer&quot;</p></li>
<li><p>“Tablet”</p></li>
<li><p>“Smartphone”</p></li>
</ul>
<h2 id='json-key-reference-for-sending-pageview-wishlist-cart-events'>JSON key reference for sending pageview/wishlist/cart events</h2>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>et</td>
<td>int/enum</td>
<td>event-type (see above)</td>
</tr>
<tr>
<td>pr</td>
<td>float</td>
<td>price</td>
</tr>
<tr>
<td>dt</td>
<td>string</td>
<td>doc-title</td>
</tr>
<tr>
<td>du</td>
<td>string</td>
<td>doc-uri - Full url with protocol</td>
</tr>
<tr>
<td>iu</td>
<td>string</td>
<td>image-uri - Without protocol so protocol can be decided while rendering to http or https</td>
</tr>
<tr>
<td>ru</td>
<td>string</td>
<td>referrer-uri</td>
</tr>
<tr>
<td>ct</td>
<td>string</td>
<td>category-type (Example; Womens Shoes)</td>
</tr>
<tr>
<td>bt</td>
<td>string</td>
<td>brand-type (Example: Nike)</td>
</tr>
<tr>
<td>epi</td>
<td>int/string</td>
<td>external product unique id (variant level if available)</td>
</tr>
<tr>
<td>empi</td>
<td>int/string</td>
<td>external product master id (if there is a group product id with different variant ids)</td>
</tr>
<tr>
<td>qty</td>
<td>int</td>
<td>quantity</td>
</tr>
<tr>
<td>stk</td>
<td>int</td>
<td>stock value</td>
</tr>
<tr>
<td>variants</td>
<td>JSON</td>
<td>variants (Example - <code>[{&quot;Black/blue&quot;: &lt;<epi-value>&gt;}])</code></td>
</tr>
<tr>
<td>cprops</td>
<td>object</td>
<td>custom parameter to add any custom data to the event. Fetch will return this data.</td>
</tr>
</tbody></table>

<aside class="notice">
Shopify’s product handle only returns handle, if you are using liquid, try using
<code>{{ shop.url }}{{ product.url }}</code> expression to get the full url of the product
</aside>
<h1 id='provider-based-validation-shopify'>Provider based validation - Shopify</h1>
<p>As part of the Swym Shopify app install, provider based logins are picked automatically and validated the user to Swym.</p>
<h1 id='provider-based-validation-magento'>Provider based validation - Magento</h1>
<p>We provide an endpoint, where a Magento server can call to validate a logged in user. Here are the details of the API and a working CURL example.</p>

<p>Endpoint: /provider/validate</p>

<p>Method Type: POST</p>
<h2 id='request-parameters'>Request parameters</h2>
<p>A JSON map with the following parameters</p>

<table><thead>
<tr>
<th>JSON Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>pid</td>
<td>An alphanumeric string representing the retailer’s pid</td>
</tr>
<tr>
<td>e</td>
<td>Encrypted/base64 encoded email (authenticated by Magento)</td>
</tr>
<tr>
<td>reg-id</td>
<td>Represents the registration identifier; (optionally can also be sent via the HTTP headers)</td>
</tr>
</tbody></table>
<h2 id='request-headers'>Request headers</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-swym-regid</td>
<td>Represents the registration identifier. (optionally can be sent via reg-id in the POST request)</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h2 id='response'>Response</h2>
<ul>
<li><p>HTTP 200 OK response. if the request is good</p></li>
<li><p>HTTP 400 response, if one or more the arguments is incorrect</p></li>
<li><p>HTTP 401 unauthorized, if the encryption is incorrect</p></li>
</ul>
<h2 id='examples'>Examples</h2><h3 id='example-1-example-showing-sending-all-the-content-in-json'>Example 1 - Example showing sending all the content in JSON</h3>
<p>Send a request via CURL where all the parameters in a JSON</p>

<blockquote>
<p>&gt; cat content.json</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jACjc3XtT14RV20G43cDd5Vt/QRVluX7cbo7e2JExKyMXgFpTnw/kqV4AAjlKADDJepzFn7jHRIvElNf97vmn8Cnna4B8653DrO1nesLErhzAOWKcQUHuDR1dGN1aNUany9ej4GfOgsj9uMyBGJyXcIWK0DxAHqqjQTSAfscCmqg0sXuvNRX8VZrzhnXLjvKJqaQ0iqDoLhbruXE7cAHvYCEdytYCBdKfJLmgeGF+PEAd8+lWxJ7pEhTxgd1jM6CgbO23wc6pOse6I8QKUY5X4Tyuzup5SOGCUpLe1tzxauE/fkq5YErAs1/rUooRfyLzcoB303x4lQTaKQKNR7HaQ=="</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"y4/8LjPDkpzNr7Jxiy2b3r0RMZ/fK4GpSS55qhn3tcU="</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reg-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4Egh4idjJRctwKv6vsTiryPZKVMpUK3LK6LTS1PhQY9of2Qs6IEm_MkioJy3Y8HrBFo2Ky5epGHf2IYJwWT4ND_lNXCoB8RdD7PVIaE4xH5ozZRahfnefr4l64L3oTf8HWx1qeZSR4IaPEPVoM6ugKOhfJJKlV2m95CRI-wp3h8"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Send a CURL request via POST using application/json header and using content.json file in the body</p>

<p>&gt; curl -vvv  -X POST  -H &quot;Content-Type:application/json&quot;  -d @content.json http://swymstoragestaging-785025156.us-east-1.elb.amazonaws.com/provider/validate </p>

<p>* Hostname was NOT found in DNS cache</p>

<p>*   Trying 54.88.195.236...</p>

<p>* Connected to swymstoragestaging-785025156.us-east-1.elb.amazonaws.com (54.88.195.236) port 80 (#0)</p>

<p>&gt; POST /provider/validate HTTP/1.1</p>

<p>&gt; User-Agent: curl/7.35.0</p>

<p>&gt; Host: swymstoragestaging-785025156.us-east-1.elb.amazonaws.com</p>

<p>&gt; Accept: <em>/</em></p>

<p>&gt; Content-Type:application/json</p>

<p>&gt; Content-Length: 592</p>

<p>&gt; </p>

<p>* upload completely sent off: 592 out of 592 bytes</p>

<p>&lt; HTTP/1.1 200 OK</p>

<p>&lt; Date: Mon, 09 Feb 2015 20:21:39 GMT</p>

<p>* Server Jetty(7.x.y-SNAPSHOT) is not blacklisted</p>

<p>&lt; Server: Jetty(7.x.y-SNAPSHOT)</p>

<p>&lt; Content-Length: 19</p>

<p>&lt; Connection: keep-alive</p>

<p>&lt; </p>

<p>* Connection #0 to host swymstoragestaging-785025156.us-east-1.elb.amazonaws.com left intact
Requested validated</p>
<h3 id='example-2-example-showing-sending-regid-in-header-and-the-rest-of-the-content-in-json'>Example 2 - Example showing sending regid in header and the rest of the content in JSON</h3>
<p>Send a curl request using x-swym-regid header and the rest of the content in JSON body</p>

<blockquote>
<p>cat content-2.json</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jACjc3XtT14RV20G43cDd5Vt/QRVluX7cbo7e2JExKyMXgFpTnw/kqV4AAjlKADDJepzFn7jHRIvElNf97vmn8Cnna4B8653DrO1nesLErhzAOWKcQUHuDR1dGN1aNUany9ej4GfOgsj9uMyBGJyXcIWK0DxAHqqjQTSAfscCmqg0sXuvNRX8VZrzhnXLjvKJqaQ0iqDoLhbruXE7cAHvYCEdytYCBdKfJLmgeGF+PEAd8+lWxJ7pEhTxgd1jM6CgbO23wc6pOse6I8QKUY5X4Tyuzup5SOGCUpLe1tzxauE/fkq5YErAs1/rUooRfyLzcoB303x4lQTaKQKNR7HaQ=="</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"y4/8LjPDkpzNr7Jxiy2b3r0RMZ/fK4GpSS55qhn3tcU="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>&gt; /usr/bin/curl -vvv  -X POST  -H &quot;Content-Type:application/json&quot; -H &quot;x-swym-regid: 4Egh...&quot;  -d @content-2.json http://swymstoragestaging-785025156.us-east-1.elb.amazonaws.com/provider/validate</p>

<p>* Hostname was NOT found in DNS cache</p>

<p>*   Trying 54.88.195.236...</p>

<p>* Connected to swymstoragestaging-785025156.us-east-1.elb.amazonaws.com (54.88.195.236) port 80 (#0)</p>

<p>&gt; POST /provider/validate HTTP/1.1</p>

<p>&gt; User-Agent: curl/7.35.0</p>

<p>&gt; Host: swymstoragestaging-785025156.us-east-1.elb.amazonaws.com</p>

<p>&gt; Accept: <em>/</em></p>

<p>&gt; Content-Type:application/json</p>

<p>&gt; x-swym-regid: 4Egh4idjJRctwKv6vsTiryPZKVMpUK3LK6LTS1PhQY9of2Qs6IEm_MkioJy3Y8HrBFo2</p>

<p>&gt; Content-Length: 407</p>

<p>&gt; </p>

<p>* upload completely sent off: 407 out of 407 bytes</p>

<p>&lt; HTTP/1.1 200 OK</p>

<p>&lt; Date: Mon, 09 Feb 2015 20:27:39 GMT</p>

<p>* Server Jetty(7.x.y-SNAPSHOT) is not blacklisted</p>

<p>&lt; Server: Jetty(7.x.y-SNAPSHOT)</p>

<p>&lt; Content-Length: 19</p>

<p>&lt; Connection: keep-alive</p>
<h3 id='example-3-example-showing-a-http-401-unauthorized'>Example 3 - Example showing a HTTP 401 (unauthorized)</h3>
<p>Send a bad encrypted email to the server</p>

<p>/usr/bin/curl -vvv  -X POST  -H &quot;Content-Type:application/json&quot; -H &quot;x-swym-regid: 4Egh4idjJRctwKv6vsTiryPZKVMpUK3LK6LTS1PhQY9of2Qs6IEm_MkioJy3Y8HrBFo2Ky5
WT4ND_lNXCoB8RdD7PVIaE4xH5ozZRahfnefr4l64L3oTf8HWx1qeZSR4IaPEPVoM6ug
-wp3h8&quot;  -d @bad-content.json 
http://swymstoragestaging-785025156.us-east-1.elb.amazonaws.com/provider/validate</p>

<p>* Hostname was NOT found in DNS cache</p>

<p>*   Trying 54.88.195.236...</p>

<p>* Connected to swymstoragestaging-785025156.us-east-1.elb.amazonaws.com (54.88.195.236) port 80 (#0)</p>

<p>&gt; POST /provider/validate HTTP/1.1</p>

<p>&gt; User-Agent: curl/7.35.0</p>

<p>&gt; Host: swymstoragestaging-785025156.us-east-1.elb.amazonaws.com</p>

<p>&gt; Accept: <em>/</em></p>

<p>&gt; Content-Type:application/json</p>

<p>&gt; x-swym-regid: 
4Egh4idjJRctwKv6vsTiryPZKVMpUK3LK6LTS1PhQY9of2Qs6IEm_MkioJy3Y8HrBFo2Ky
5epGHf2IYJwWT4ND_lNXCoB8RdD7PVIaE4xH5ozZRahfnefr4l64L3oTf8HWx1qeZSR4Ia
PEPVoM6ugKOhfJJKlV2m95CRI-wp3h8</p>

<p>&gt; Content-Length: 406</p>

<p>&gt; </p>

<p>* upload completely sent off: 406 out of 406 bytes</p>

<p>&lt; HTTP/1.1 401 Unauthorized</p>

<p>&lt; Date: Mon, 09 Feb 2015 20:29:54 GMT</p>

<p>* Server Jetty(7.x.y-SNAPSHOT) is not blacklisted</p>

<p>&lt; Server: Jetty(7.x.y-SNAPSHOT)</p>

<p>&lt; Content-Length: 50</p>

<p>&lt; Connection: keep-alive</p>

<p>&lt; </p>

<p>* Connection #0 to host swymstoragestaging-785025156.us-east-1.elb.amazonaws.com left intact
javax.crypto.BadPaddingException: Decryption error</p>
<h3 id='example-4-showing-a-null-providerid'>Example 4: Showing a null providerid</h3>
<p>usr/bin/curl -vvv  -X POST  -H &quot;Content-Type:application/json&quot; -H &quot;x-swym-regid: 4Egh4idjJRctwKv6vsTiryPZKVMpUK3LK6LTS1PhQY9of2Qs6IEm_MkioJy3Y8HrBFo2Ky5epGHf2IYJ
wWT4ND_lNXCoB8RdD7PVIaE4xH5ozZRahfnefr4l64L3oTf8HWx1qeZSR4IaPEPVoM6ugKOhfJJKlV2m
95CRI-wp3h8&quot;  -d &#39;{}&#39; 
http://swymstoragestaging-785025156.us-east-1.elb.amazonaws.com/provider/validate</p>

<p>* Hostname was NOT found in DNS cache</p>

<p>*   Trying 54.88.195.236...</p>

<p>* Connected to swymstoragestaging-785025156.us-east-1.elb.amazonaws.com (54.88.195.236) port 80 (#0)</p>

<p>&gt; POST /provider/validate HTTP/1.1</p>

<p>&gt; User-Agent: curl/7.35.0</p>

<p>&gt; Host: swymstoragestaging-785025156.us-east-1.elb.amazonaws.com</p>

<p>&gt; Accept: <em>/</em></p>

<p>&gt; Content-Type:application/json</p>

<p>&gt; x-swym-regid: 
4Egh4idjJRctwKv6vsTiryPZKVMpUK3LK6LTS1PhQY9of2Qs6IEm_MkioJy3Y8HrBFo2Ky5
epGHf2IYJwWT4ND_lNXCoB8RdD7PVIaE4xH5ozZRahfnefr4l64L3oTf8HWx1qeZSR4IaPE
PVoM6ugKOhfJJKlV2m95CRI-wp3h8</p>

<p>&gt; Content-Length: 2</p>

<p>&gt; </p>

<p>* upload completely sent off: 2 out of 2 bytes</p>

<p>&lt; HTTP/1.1 400 Bad Request</p>

<p>&lt; Date: Mon, 09 Feb 2015 20:34:17 GMT</p>

<p>* Server Jetty(7.x.y-SNAPSHOT) is not blacklisted</p>

<p>&lt; Server: Jetty(7.x.y-SNAPSHOT)</p>

<p>&lt; Content-Length: 20</p>

<p>&lt; Connection: keep-alive</p>

<p>&lt; </p>

<p>* Connection #0 to host swymstoragestaging-785025156.us-east-1.elb.amazonaws.com left intact
pid empty/null param</p>
<h1 id='errors'>Errors</h1>
<p>Ideally there should not be any error while calling these APIs, but in case if you encounter any such interruptions in the flow, check the console of your web page and see if that error is coming from our end. If yes, reach out to our developers’ team. In any case, we are monitoring our APIs. So if any exceptions or errors are generated, we can check the logs and fix it for you even before you encounter them.</p>

<p>The Swym JS APIs use the following error codes if error is from server side:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- You are not allowed to request this data.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified requested data could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a API with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t accepted.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The requested API has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re raising too many requests! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
